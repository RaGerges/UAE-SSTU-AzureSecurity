{
    "$schema":  "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
    "contentVersion":  "1.0.0.0",
    "parameters":  {

                   },
    "resources":  [
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "4D3CF186A40A7C2C481B645A540C1C7C",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Storage/storageAccounts (StorageV2) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Storage/storageAccounts (StorageV2) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Storage/storageAccounts"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "StorageV2"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Storage/storageAccounts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "103941B66EFD5882F03DEBBC8AC4C9A8",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/virtualNetworks to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/virtualNetworks to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/virtualNetworks"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/virtualNetworks/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "VMProtectionAlerts",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "EB9FBE4CFA30BC2439C7E5A99AB717D2",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/connections (V1) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/connections (V1) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/connections"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "V1"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/connections/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "A3CC5920C945B6FA604AA3036641F405",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for microsoft.operationalinsights/workspaces to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for microsoft.operationalinsights/workspaces to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "microsoft.operationalinsights/workspaces"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "microsoft.operationalinsights/workspaces/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Audit",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "0D32F82FC3AB649805888236FD965BE8",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Logic/workflows to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Logic/workflows to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Logic/workflows"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Logic/workflows/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "WorkflowRuntime",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "05EE701865C5EF359979ED0C591C8928",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.KeyVault/vaults to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.KeyVault/vaults to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.KeyVault/vaults"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.KeyVault/vaults/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AuditEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "94276E642A781F83294D565F6AE1B316",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Insights/components (web) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Insights/components (web) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Insights/components"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "web"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Insights/components/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppAvailabilityResults",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppBrowserTimings",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppMetrics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppDependencies",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppExceptions",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppPageViews",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppPerformanceCounters",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppRequests",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppSystemEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppTraces",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "93DFF553BBAC1E2370C0097029629386",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.DesktopVirtualization/workspaces to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.DesktopVirtualization/workspaces to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.DesktopVirtualization/workspaces"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.DesktopVirtualization/workspaces/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Checkpoint",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Error",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Management",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Feed",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "7C3F20146D31464A442983B47A024427",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Automation/automationAccounts to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Automation/automationAccounts to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Automation/automationAccounts"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Automation/automationAccounts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "JobLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "JobStreams",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DscNodeStatus",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AuditEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "0231FCA785ED25776C9924503CF8B1EB",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Storage/storageAccounts (Storage) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Storage/storageAccounts (Storage) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Storage/storageAccounts"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "Storage"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Storage/storageAccounts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "ABFDA0EAB2FE77ED503037D276B6294E",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/serverFarms (functionapp) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/serverFarms (functionapp) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/serverFarms"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "functionapp"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/serverFarms/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "4BCBC4B11E519ABC073BE7D56FF4B85A",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/sites (functionapp) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/sites (functionapp) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/sites"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "functionapp"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/sites/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FunctionAppLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "69236DBA82C8CBFBD4F0FA62344CCA83",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/publicIPAddresses to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/publicIPAddresses to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/publicIPAddresses"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/publicIPAddresses/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DDoSProtectionNotifications",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DDoSMitigationFlowLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DDoSMitigationReports",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "D3F2573A808FAB2688DEEFF4D6BE05BB",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Cdn/CdnWebApplicationFirewallPolicies to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Cdn/CdnWebApplicationFirewallPolicies to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Cdn/CdnWebApplicationFirewallPolicies"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Cdn/CdnWebApplicationFirewallPolicies/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "WebApplicationFirewallLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "3FFDC8504B8DFC245770B9DEDB86C6BF",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/serverFarms (linux) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/serverFarms (linux) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/serverFarms"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "linux"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/serverFarms/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "C2E942DD7954DEB73491254DFA3FCB80",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/networkSecurityGroups to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/networkSecurityGroups to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/networkSecurityGroups"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/networkSecurityGroups/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "NetworkSecurityGroupEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "NetworkSecurityGroupRuleCounter",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "D3DFEED3AD9A826F328426E7F0A6CB70",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Cdn/profiles to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Cdn/profiles to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Cdn/profiles"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Cdn/profiles/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureCdnAccessLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "8B04F1F215D5193FAE02C592D02D16EF",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/frontdoors to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/frontdoors to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/frontdoors"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/frontdoors/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FrontdoorAccessLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FrontdoorWebApplicationFirewallLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "204F3D038AD9D98BBF748C311CDBC999",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/networkInterfaces to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/networkInterfaces to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/networkInterfaces"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/networkInterfaces/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "4D980DA79045A0BE32C90527CA138577",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/bastionHosts to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/bastionHosts to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/bastionHosts"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/bastionHosts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "BastionAuditLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "D61A0A3FA7E49D7A82FE7111E490F7D5",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Cdn/profiles/endpoints to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Cdn/profiles/endpoints to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Cdn/profiles/endpoints"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Cdn/profiles/endpoints/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "CoreAnalytics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('fullName')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "B050B0D4C3CDCE1D4AC66D392DF6B7CC",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/sites (app,linux,container) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/sites (app,linux,container) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/sites"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "app,linux,container"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/sites/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceAntivirusScanAuditLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceHTTPLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceConsoleLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceAppLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceFileAuditLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceAuditLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceIPSecAuditLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServicePlatformLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "E84B8271527313D90DC8E190C39FF74B",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Compute/virtualMachines to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Compute/virtualMachines to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Compute/virtualMachines"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Compute/virtualMachines/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "8890AE412F202CCF655810D9F8BA4F7D",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Compute/disks to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Compute/disks to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Compute/disks"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Compute/disks/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "51198AD7A860AEE57FD3A1FA913A2D9A",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/applicationGateways to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/applicationGateways to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/applicationGateways"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/applicationGateways/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ApplicationGatewayAccessLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ApplicationGatewayPerformanceLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ApplicationGatewayFirewallLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "CDF72FE7F481BFCD222134FE2B91057C",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Logic/integrationAccounts to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Logic/integrationAccounts to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Logic/integrationAccounts"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Logic/integrationAccounts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "IntegrationAccountTrackingEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "D6C87A1B6C9E0A0DD913D3FA8DE904F9",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/dnszones to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/dnszones to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/dnszones"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/dnszones/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "4ED3AE4C775BE4A6C963645E6097394E",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Purview/accounts to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Purview/accounts to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Purview/accounts"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Purview/accounts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ScanStatusLogEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DataSensitivityLogEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Security",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "398D805E4F5EA41D104171CA3EE84F36",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.DataFactory/factories to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.DataFactory/factories to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.DataFactory/factories"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.DataFactory/factories/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ActivityRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "PipelineRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "TriggerRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SandboxPipelineRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SandboxActivityRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SSISPackageEventMessages",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SSISPackageExecutableStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SSISPackageEventMessageContext",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SSISPackageExecutionComponentPhases",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SSISPackageExecutionDataStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SSISIntegrationRuntimeLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "70E3CC3B14B51DC94F1CDE32A75BF775",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Sql/servers (v12.0) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Sql/servers (v12.0) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Sql/servers"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "v12.0"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Sql/servers/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "E4201F4322F1AF683A59A592530DB182",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Sql/servers/databases (v12.0,user) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Sql/servers/databases (v12.0,user) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Sql/servers/databases"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "v12.0,user"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Sql/servers/databases/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SQLInsights",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AutomaticTuning",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "QueryStoreRuntimeStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "QueryStoreWaitStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Errors",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DatabaseWaitStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Timeouts",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Blocks",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Deadlocks",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DevOpsOperationsAudit",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SQLSecurityAuditEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('fullName')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "27ED7449769BEA5D4A1A8FC5DBCAEC4D",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Sql/servers/databases (v12.0,system) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Sql/servers/databases (v12.0,system) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Sql/servers/databases"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "v12.0,system"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Sql/servers/databases/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SQLInsights",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AutomaticTuning",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "QueryStoreRuntimeStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "QueryStoreWaitStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Errors",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DatabaseWaitStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Timeouts",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Blocks",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Deadlocks",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DevOpsOperationsAudit",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SQLSecurityAuditEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('fullName')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "C13ED092AC2619F97F9A32FF0D84CA52",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/azureFirewalls to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/azureFirewalls to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/azureFirewalls"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/azureFirewalls/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureFirewallApplicationRule",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureFirewallNetworkRule",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureFirewallDnsProxy",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "89C6B83078C6B35E12B95D98DDF87E26",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Cdn/profiles (frontdoor) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Cdn/profiles (frontdoor) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Cdn/profiles"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "frontdoor"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Cdn/profiles/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FrontDoorAccessLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FrontDoorHealthProbeLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FrontDoorWebApplicationFirewallLog",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "AB571C9159E882B375133104C2473E7C",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Synapse/workspaces to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Synapse/workspaces to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Synapse/workspaces"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Synapse/workspaces/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SynapseRbacOperations",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "GatewayApiRequests",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SQLSecurityAuditEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "BuiltinSqlReqsEnded",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "IntegrationPipelineRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "IntegrationActivityRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "IntegrationTriggerRuns",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "6DD55B5BA0B83E32FD3495B24FF3644E",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Kusto/clusters to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Kusto/clusters to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Kusto/clusters"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Kusto/clusters/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SucceededIngestion",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FailedIngestion",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "IngestionBatching",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Command",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Query",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "TableUsageStatistics",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "TableDetails",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Journal",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "C63EB710BA00A1E79E317C8BC8EBB33B",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Synapse/workspaces/sqlPools to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Synapse/workspaces/sqlPools to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Synapse/workspaces/sqlPools"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Synapse/workspaces/sqlPools/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SqlRequests",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "RequestSteps",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ExecRequests",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DmsWorkers",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Waits",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SQLSecurityAuditEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('fullName')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "ED92600EAB433BA466B40C12A2931A13",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.MachineLearningServices/workspaces to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.MachineLearningServices/workspaces to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.MachineLearningServices/workspaces"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.MachineLearningServices/workspaces/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AmlComputeClusterEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AmlComputeClusterNodeEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AmlComputeJobEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AmlComputeCpuGpuUtilization",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AmlRunStatusChangedEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ModelsChangeEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ModelsReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ModelsActionEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DeploymentReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DeploymentEventACI",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DeploymentEventAKS",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "InferencingOperationAKS",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "InferencingOperationACI",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "EnvironmentChangeEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "EnvironmentReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DataLabelChangeEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DataLabelReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ComputeInstanceEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DataStoreChangeEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DataStoreReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DataSetChangeEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DataSetReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "PipelineChangeEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "PipelineReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "RunEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "RunReadEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "24F7FF9F89285F5E8A9D3D265C626B47",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.DataShare/accounts to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.DataShare/accounts to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.DataShare/accounts"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.DataShare/accounts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Shares",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ShareSubscriptions",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SentShareSnapshots",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ReceivedShareSnapshots",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "E52185E6FFDAABDB585CE5195AA711FE",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Storage/storageAccounts (BlobStorage) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Storage/storageAccounts (BlobStorage) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Storage/storageAccounts"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "BlobStorage"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Storage/storageAccounts/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "BF94DF2ABC1EFF4F6C6BA0044049549A",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.ContainerService/managedClusters to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.ContainerService/managedClusters to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.ContainerService/managedClusters"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.ContainerService/managedClusters/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "kube-apiserver",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "kube-audit",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "kube-audit-admin",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "kube-controller-manager",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "kube-scheduler",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "cluster-autoscaler",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "guard",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "9456090CCC9873CA052159C151F35235",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.ContainerRegistry/registries to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.ContainerRegistry/registries to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.ContainerRegistry/registries"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.ContainerRegistry/registries/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ContainerRegistryRepositoryEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ContainerRegistryLoginEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "CE2A38D82B02FFA396B1D72D1E5B273A",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/serverFarms (app) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/serverFarms (app) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/serverFarms"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "app"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/serverFarms/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "6663C6D3F8EEAB4DEA59D4811926CE36",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/sites (app) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/sites (app) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/sites"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "app"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/sites/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceHTTPLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceConsoleLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceAppLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceAuditLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServiceIPSecAuditLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AppServicePlatformLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "C89F5030DC8C4DD0F88D3B6C629D897A",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/loadBalancers to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/loadBalancers to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/loadBalancers"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/loadBalancers/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "LoadBalancerAlertEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "LoadBalancerProbeHealthStatus",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "C450F6AA3432D07E7993607C6AAA7709",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Devices/IotHubs to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Devices/IotHubs to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Devices/IotHubs"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Devices/IotHubs/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Connections",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DeviceTelemetry",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "C2DCommands",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DeviceIdentityOperations",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FileUploadOperations",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Routes",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "D2CTwinOperations",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "C2DTwinOperations",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "TwinQueries",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "JobsOperations",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DirectMethods",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DistributedTracing",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Configurations",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DeviceStreams",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "9DA5EFBFE63BBAC0C09142D9B5FFDFC3",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.EventHub/namespaces to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.EventHub/namespaces to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.EventHub/namespaces"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.EventHub/namespaces/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ArchiveLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "OperationalLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AutoScaleLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "KafkaCoordinatorLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "KafkaUserErrorLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "EventHubVNetConnectionEvent",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "CustomerManagedKeyUserLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "94FB31BE7BBEC0498233D547B7C7BBE8",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/privateEndpoints to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/privateEndpoints to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/privateEndpoints"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/privateEndpoints/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "EF4E93BE2778EFAA77F8D681C688C8AD",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Network/privateDnsZones to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Network/privateDnsZones to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Network/privateDnsZones"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Network/privateDnsZones/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "9B3C30C162A45B1B9DEC46B9F3FC2C69",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Synapse/workspaces/bigDataPools to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Synapse/workspaces/bigDataPools to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Synapse/workspaces/bigDataPools"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Synapse/workspaces/bigDataPools/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "BigDataPoolAppsEnded",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('fullName')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "DF5C522C279F1C952CF677C12C7B4BC2",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Web/sites (functionapp,linux) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Web/sites (functionapp,linux) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Web/sites"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "functionapp,linux"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Web/sites/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "FunctionAppLogs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "F4CDF014134DB67AB07D50BC43A70322",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Sql/servers (v12.0,analytics) to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Sql/servers (v12.0,analytics) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Sql/servers"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "v12.0,analytics"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Sql/servers/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "3AA846351E0444978D8C682226F640FD",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.Sql/servers/databases to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.Sql/servers/databases (v12.0,user,datawarehouse,gen2,analytics) to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.Sql/servers/databases"
                                                                                         },
                                                                                         {
                                                                                             "field":  "kind",
                                                                                             "equals":  "v12.0,user,datawarehouse,gen2,analytics"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.Sql/servers/databases/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SQLSecurityAuditEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "DmsWorkers",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "ExecRequests",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "RequestSteps",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "SqlRequests",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "Waits",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('fullName')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policyDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "21F57A48443C0A60112B8A2C96ED1E5D",
                          "properties":  {
                                             "displayName":  "Apply Diagnostic Settings for Microsoft.RecoveryServices/vaults to a Log Analytics Workspace",
                                             "mode":  "Indexed",
                                             "description":  "This policy automatically deploys diagnostic settings to Apply Diagnostic Settings for Microsoft.RecoveryServices/vaults to a Log Analytics Workspace.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyRule":  {
                                                                "if":  {
                                                                           "allOf":  [
                                                                                         {
                                                                                             "field":  "type",
                                                                                             "equals":  "Microsoft.RecoveryServices/vaults"
                                                                                         }
                                                                                     ]
                                                                       },
                                                                "then":  {
                                                                             "effect":  "deployIfNotExists",
                                                                             "details":  {
                                                                                             "type":  "Microsoft.Insights/diagnosticSettings",
                                                                                             "existenceCondition":  {
                                                                                                                        "allOf":  [
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/logs.enabled",
                                                                                                                                          "equals":  "[[parameters('LogsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/metrics.enabled",
                                                                                                                                          "equals":  "[[parameters('MetricsEnabled')]"
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                          "field":  "Microsoft.Insights/diagnosticSettings/workspaceId",
                                                                                                                                          "equals":  "[[parameters('logAnalytics')]"
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                    },
                                                                                             "roleDefinitionIds":  [
                                                                                                                       "/providers/Microsoft.Authorization/roleDefinitions/92aaf0da-9dab-42b6-94a3-d43ce8d16293"
                                                                                                                   ],
                                                                                             "deployment":  {
                                                                                                                "properties":  {
                                                                                                                                   "mode":  "incremental",
                                                                                                                                   "template":  {
                                                                                                                                                    "$schema":  "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                                                                                                                                                    "contentVersion":  "1.0.0.0",
                                                                                                                                                    "parameters":  {
                                                                                                                                                                       "name":  {
                                                                                                                                                                                    "type":  "string"
                                                                                                                                                                                },
                                                                                                                                                                       "logAnalytics":  {
                                                                                                                                                                                            "type":  "string"
                                                                                                                                                                                        },
                                                                                                                                                                       "metricsEnabled":  {
                                                                                                                                                                                              "type":  "string"
                                                                                                                                                                                          },
                                                                                                                                                                       "logsEnabled":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                       "profileName":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       }
                                                                                                                                                                   },
                                                                                                                                                    "variables":  {

                                                                                                                                                                  },
                                                                                                                                                    "resources":  [
                                                                                                                                                                      {
                                                                                                                                                                          "type":  "Microsoft.RecoveryServices/vaults/providers/diagnosticSettings",
                                                                                                                                                                          "apiVersion":  "2017-05-01-preview",
                                                                                                                                                                          "name":  "[[concat(parameters('name'), '/', 'Microsoft.Insights/', parameters('profileName'))]",
                                                                                                                                                                          "properties":  {
                                                                                                                                                                                             "workspaceId":  "[[parameters('logAnalytics')]",
                                                                                                                                                                                             "metrics":  [
                                                                                                                                                                                                             {
                                                                                                                                                                                                                 "category":  "AllMetrics",
                                                                                                                                                                                                                 "enabled":  "[[parameters('metricsEnabled')]",
                                                                                                                                                                                                                 "retentionPolicy":  {
                                                                                                                                                                                                                                         "enabled":  false,
                                                                                                                                                                                                                                         "days":  0
                                                                                                                                                                                                                                     }
                                                                                                                                                                                                             }
                                                                                                                                                                                                         ],
                                                                                                                                                                                             "logs":  [
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureBackupReport",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "CoreAzureBackup",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AddonAzureBackupJobs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AddonAzureBackupAlerts",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AddonAzureBackupPolicy",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AddonAzureBackupStorage",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AddonAzureBackupProtectedInstance",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureSiteRecoveryJobs",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureSiteRecoveryEvents",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureSiteRecoveryReplicatedItems",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureSiteRecoveryReplicationStats",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureSiteRecoveryRecoveryPoints",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureSiteRecoveryReplicationDataUploadRate",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          },
                                                                                                                                                                                                          {
                                                                                                                                                                                                              "category":  "AzureSiteRecoveryProtectedDiskDataChurn",
                                                                                                                                                                                                              "enabled":  "[[parameters('logsEnabled')]"
                                                                                                                                                                                                          }
                                                                                                                                                                                                      ]
                                                                                                                                                                                         }
                                                                                                                                                                      }
                                                                                                                                                                  ],
                                                                                                                                                    "outputs":  {
                                                                                                                                                                    "policy":  {
                                                                                                                                                                                   "type":  "string",
                                                                                                                                                                                   "value":  "[[concat(parameters('logAnalytics'), 'configured for diagnostic logs for ', ': ', parameters('name'))]"
                                                                                                                                                                               }
                                                                                                                                                                }
                                                                                                                                                },
                                                                                                                                   "parameters":  {
                                                                                                                                                      "logAnalytics":  {
                                                                                                                                                                           "value":  "[[parameters('logAnalytics')]"
                                                                                                                                                                       },
                                                                                                                                                      "name":  {
                                                                                                                                                                   "value":  "[[field('name')]"
                                                                                                                                                               },
                                                                                                                                                      "metricsEnabled":  {
                                                                                                                                                                             "value":  "[[parameters('metricsEnabled')]"
                                                                                                                                                                         },
                                                                                                                                                      "logsEnabled":  {
                                                                                                                                                                          "value":  "[[parameters('logsEnabled')]"
                                                                                                                                                                      },
                                                                                                                                                      "profileName":  {
                                                                                                                                                                          "value":  "[[parameters('profileName')]"
                                                                                                                                                                      }
                                                                                                                                                  }
                                                                                                                               }
                                                                                                            }
                                                                                         }
                                                                         }
                                                            }
                                         }
                      },
                      {
                          "type":  "Microsoft.Authorization/policySetDefinitions",
                          "apiVersion":  "2020-09-01",
                          "name":  "7762D61B7AB8A71926B200A60FF1B68A",
                          "dependsOn":  [
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '4D3CF186A40A7C2C481B645A540C1C7C')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '103941B66EFD5882F03DEBBC8AC4C9A8')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'EB9FBE4CFA30BC2439C7E5A99AB717D2')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'A3CC5920C945B6FA604AA3036641F405')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '0D32F82FC3AB649805888236FD965BE8')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '05EE701865C5EF359979ED0C591C8928')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '94276E642A781F83294D565F6AE1B316')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '93DFF553BBAC1E2370C0097029629386')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '7C3F20146D31464A442983B47A024427')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '0231FCA785ED25776C9924503CF8B1EB')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'ABFDA0EAB2FE77ED503037D276B6294E')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '4BCBC4B11E519ABC073BE7D56FF4B85A')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '69236DBA82C8CBFBD4F0FA62344CCA83')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D3F2573A808FAB2688DEEFF4D6BE05BB')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '3FFDC8504B8DFC245770B9DEDB86C6BF')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C2E942DD7954DEB73491254DFA3FCB80')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D3DFEED3AD9A826F328426E7F0A6CB70')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '8B04F1F215D5193FAE02C592D02D16EF')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '204F3D038AD9D98BBF748C311CDBC999')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '4D980DA79045A0BE32C90527CA138577')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D61A0A3FA7E49D7A82FE7111E490F7D5')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'B050B0D4C3CDCE1D4AC66D392DF6B7CC')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'E84B8271527313D90DC8E190C39FF74B')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '8890AE412F202CCF655810D9F8BA4F7D')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '51198AD7A860AEE57FD3A1FA913A2D9A')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'CDF72FE7F481BFCD222134FE2B91057C')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D6C87A1B6C9E0A0DD913D3FA8DE904F9')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '4ED3AE4C775BE4A6C963645E6097394E')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '398D805E4F5EA41D104171CA3EE84F36')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '70E3CC3B14B51DC94F1CDE32A75BF775')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'E4201F4322F1AF683A59A592530DB182')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '27ED7449769BEA5D4A1A8FC5DBCAEC4D')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C13ED092AC2619F97F9A32FF0D84CA52')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '89C6B83078C6B35E12B95D98DDF87E26')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'AB571C9159E882B375133104C2473E7C')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '6DD55B5BA0B83E32FD3495B24FF3644E')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C63EB710BA00A1E79E317C8BC8EBB33B')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'ED92600EAB433BA466B40C12A2931A13')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '24F7FF9F89285F5E8A9D3D265C626B47')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'E52185E6FFDAABDB585CE5195AA711FE')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'BF94DF2ABC1EFF4F6C6BA0044049549A')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '9456090CCC9873CA052159C151F35235')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'CE2A38D82B02FFA396B1D72D1E5B273A')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '6663C6D3F8EEAB4DEA59D4811926CE36')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C89F5030DC8C4DD0F88D3B6C629D897A')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C450F6AA3432D07E7993607C6AAA7709')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '9DA5EFBFE63BBAC0C09142D9B5FFDFC3')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '94FB31BE7BBEC0498233D547B7C7BBE8')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'EF4E93BE2778EFAA77F8D681C688C8AD')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '9B3C30C162A45B1B9DEC46B9F3FC2C69')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'DF5C522C279F1C952CF677C12C7B4BC2')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', 'F4CDF014134DB67AB07D50BC43A70322')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '3AA846351E0444978D8C682226F640FD')]",
                                            "[resourceId('Microsoft.Authorization/policyDefinitions/', '21F57A48443C0A60112B8A2C96ED1E5D')]"
                                        ],
                          "properties":  {
                                             "displayName":  "Azure Diagnostics Policy Initiative for a Log Analytics Workspace",
                                             "description":  "This initiative configures application Azure resources to forward diagnostic logs and metrics to an Azure Diagnostics sink point.",
                                             "metadata":  {
                                                              "category":  "Monitoring"
                                                          },
                                             "parameters":  {
                                                                "profileName":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Profile Name for Config",
                                                                                                     "description":  "The profile name Azure Diagnostics"
                                                                                                 }
                                                                                },
                                                                "logAnalytics":  {
                                                                                     "type":  "string",
                                                                                     "metadata":  {
                                                                                                      "displayName":  "logAnalytics",
                                                                                                      "description":  "The target Log Analytics Workspace for Azure Diagnostics",
                                                                                                      "strongType":  "omsWorkspace"
                                                                                                  }
                                                                                 },
                                                                "metricsEnabled":  {
                                                                                       "type":  "String",
                                                                                       "metadata":  {
                                                                                                        "displayName":  "Enable Metrics",
                                                                                                        "description":  "Enable Metrics - True or False"
                                                                                                    },
                                                                                       "allowedValues":  [
                                                                                                             "True",
                                                                                                             "False"
                                                                                                         ],
                                                                                       "defaultValue":  "False"
                                                                                   },
                                                                "logsEnabled":  {
                                                                                    "type":  "String",
                                                                                    "metadata":  {
                                                                                                     "displayName":  "Enable Logs",
                                                                                                     "description":  "Enable Logs - True or False"
                                                                                                 },
                                                                                    "allowedValues":  [
                                                                                                          "True",
                                                                                                          "False"
                                                                                                      ],
                                                                                    "defaultValue":  "True"
                                                                                }
                                                            },
                                             "policyDefinitions":  [
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '4D3CF186A40A7C2C481B645A540C1C7C')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '103941B66EFD5882F03DEBBC8AC4C9A8')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'EB9FBE4CFA30BC2439C7E5A99AB717D2')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'A3CC5920C945B6FA604AA3036641F405')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '0D32F82FC3AB649805888236FD965BE8')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '05EE701865C5EF359979ED0C591C8928')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '94276E642A781F83294D565F6AE1B316')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '93DFF553BBAC1E2370C0097029629386')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '7C3F20146D31464A442983B47A024427')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '0231FCA785ED25776C9924503CF8B1EB')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'ABFDA0EAB2FE77ED503037D276B6294E')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '4BCBC4B11E519ABC073BE7D56FF4B85A')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '69236DBA82C8CBFBD4F0FA62344CCA83')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D3F2573A808FAB2688DEEFF4D6BE05BB')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '3FFDC8504B8DFC245770B9DEDB86C6BF')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C2E942DD7954DEB73491254DFA3FCB80')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D3DFEED3AD9A826F328426E7F0A6CB70')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '8B04F1F215D5193FAE02C592D02D16EF')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '204F3D038AD9D98BBF748C311CDBC999')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '4D980DA79045A0BE32C90527CA138577')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D61A0A3FA7E49D7A82FE7111E490F7D5')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'B050B0D4C3CDCE1D4AC66D392DF6B7CC')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'E84B8271527313D90DC8E190C39FF74B')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '8890AE412F202CCF655810D9F8BA4F7D')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '51198AD7A860AEE57FD3A1FA913A2D9A')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'CDF72FE7F481BFCD222134FE2B91057C')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'D6C87A1B6C9E0A0DD913D3FA8DE904F9')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '4ED3AE4C775BE4A6C963645E6097394E')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '398D805E4F5EA41D104171CA3EE84F36')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '70E3CC3B14B51DC94F1CDE32A75BF775')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'E4201F4322F1AF683A59A592530DB182')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '27ED7449769BEA5D4A1A8FC5DBCAEC4D')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C13ED092AC2619F97F9A32FF0D84CA52')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '89C6B83078C6B35E12B95D98DDF87E26')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'AB571C9159E882B375133104C2473E7C')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '6DD55B5BA0B83E32FD3495B24FF3644E')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C63EB710BA00A1E79E317C8BC8EBB33B')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'ED92600EAB433BA466B40C12A2931A13')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '24F7FF9F89285F5E8A9D3D265C626B47')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'E52185E6FFDAABDB585CE5195AA711FE')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'BF94DF2ABC1EFF4F6C6BA0044049549A')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '9456090CCC9873CA052159C151F35235')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'CE2A38D82B02FFA396B1D72D1E5B273A')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '6663C6D3F8EEAB4DEA59D4811926CE36')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C89F5030DC8C4DD0F88D3B6C629D897A')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'C450F6AA3432D07E7993607C6AAA7709')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '9DA5EFBFE63BBAC0C09142D9B5FFDFC3')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '94FB31BE7BBEC0498233D547B7C7BBE8')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'EF4E93BE2778EFAA77F8D681C688C8AD')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '9B3C30C162A45B1B9DEC46B9F3FC2C69')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'DF5C522C279F1C952CF677C12C7B4BC2')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', 'F4CDF014134DB67AB07D50BC43A70322')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '3AA846351E0444978D8C682226F640FD')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       },
                                                                       {
                                                                           "policyDefinitionId":  "[resourceId('Microsoft.Authorization/policyDefinitions/', '21F57A48443C0A60112B8A2C96ED1E5D')]",
                                                                           "parameters":  {
                                                                                              "logAnalytics":  {
                                                                                                                   "value":  "[[parameters('logAnalytics')]"
                                                                                                               },
                                                                                              "metricsEnabled":  {
                                                                                                                     "value":  "[[parameters('metricsEnabled')]"
                                                                                                                 },
                                                                                              "logsEnabled":  {
                                                                                                                  "value":  "[[parameters('logsEnabled')]"
                                                                                                              },
                                                                                              "profileName":  {
                                                                                                                  "value":  "[[parameters('profileName')]"
                                                                                                              }
                                                                                          }
                                                                       }
                                                                   ]
                                         }
                      }
                  ]
}
